(this["webpackJsonpjs-business-task"]=this["webpackJsonpjs-business-task"]||[]).push([[0],{27:function(e,t,n){e.exports=n(39)},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),u=n.n(c),l=n(1),o=n(2),i=n(5),s=n(6),m=n(11);function f(){var e=Object(i.a)(["\nbackground: #fe5a1d;\npadding: 20px;\nmin-height: 30px;\nborder-bottom: 2px solid black;\nposition: fixed;\ntop: 0;\nleft: 0;\nright: 0;\n"]);return f=function(){return e},e}function b(){var e=Object(i.a)(["\n&:hover {\n  background: #b31b1b;\n}\n"]);return b=function(){return e},e}function h(){var e=Object(i.a)(["\n  &:hover {\n    background: #8fbc8f;\n  }\n"]);return h=function(){return e},e}function p(){var e=Object(i.a)(['\n  font-family: "Kumbh Sans", sans-serif;\n  font-size: 17px;\n  padding: 7px;\n  border-radius: 4px;\n  border: 2px solid black;\n\n  &:hover {\n    font-size: 18px;\n  }\n']);return p=function(){return e},e}function d(){var e=Object(i.a)(["\n  margin: 10px;\n  padding: 10px;\n  width: 25vw;\n  font-size: 18px;\n"]);return d=function(){return e},e}function v(){var e=Object(i.a)(['\n  color: black;\n  text-decoration: none;\n  font-size: 20px;\n  font-family: "Kumbh Sans", sans-serif;\n\n  &:hover {\n    text-decoration: underline;\n  }\n']);return v=function(){return e},e}function E(){var e=Object(i.a)(["\n  column-count: 2;\n  column-gap: 20px;\n"]);return E=function(){return e},e}function g(){var e=Object(i.a)(["\n  list-style: none;\n"]);return g=function(){return e},e}function O(){var e=Object(i.a)(["\n  background: gray;\n  border-radius: 6px;\n"]);return O=function(){return e},e}function j(){var e=Object(i.a)(["\n  margin-left: 100px;\n  margin-right: 100px;\n"]);return j=function(){return e},e}function k(){var e=Object(i.a)(["\n  padding: 20px;\n  margin-bottom: 50px;\n"]);return k=function(){return e},e}function w(){var e=Object(i.a)(["\n  font-size: 2rem;\n  text-align: left;\n  margin-top: 20px;\n"]);return w=function(){return e},e}function y(){var e=Object(i.a)(['\n  font-family: "Kumbh Sans", sans-serif;\n  text-align: center;\n  font-size: 3rem;\n  color: silver;\n  margin-top: 100px;\n']);return y=function(){return e},e}function C(){var e=Object(i.a)(['\n  font-family: "Kumbh Sans", sans-serif;\n']);return C=function(){return e},e}var S=s.a.p(C()),x=s.a.h1(y()),N=Object(s.a)(x)(w()),T=s.a.div(k()),L=Object(s.a)(T)(j()),P=Object(s.a)(T)(O()),A=s.a.ul(g()),z=Object(s.a)(A)(E()),I=Object(s.a)(m.b)(v()),B=s.a.input(d()),K=s.a.button(p()),U=Object(s.a)(K)(h()),H=Object(s.a)(K)(b()),J=s.a.nav(f());function R(){var e=window.location.href;return r.a.createElement(J,null,e.includes("/home")||e.includes("/customer")?r.a.createElement(I,{to:"/home"},"Home"):e.includes("/")?r.a.createElement(I,{to:"/login"},"Login"):"")}var W=n(4),D=n.n(W),F=n(10),V=n(16),_=n(17),M="https://frebi.willandskill.eu/",$=function(){function e(){Object(V.a)(this,e)}return Object(_.a)(e,[{key:"register",value:function(){var e=Object(F.a)(D.a.mark((function e(t,n,a,r,c,u){var l,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="".concat(M,"auth/users/"),o={firstName:t,lastName:n,email:a,password:r,organisationName:c,organisationKind:u},e.abrupt("return",fetch(l,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(o)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,c,u){return e.apply(this,arguments)}}()},{key:"activateUser",value:function(){var e=Object(F.a)(D.a.mark((function e(t,n){var a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(M,"auth/users/activate/"),r={uid:t,token:n},e.abrupt("return",fetch(a,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(r)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(F.a)(D.a.mark((function e(t,n){var a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(M,"api-token-auth/"),r={email:t,password:n},e.abrupt("return",fetch(a,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(r)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=Object(F.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(M,"api/v1/me/"),e.abrupt("return",fetch(t,{headers:{Authorization:"Bearer ".concat(this.getToken())}}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setToken",value:function(e){localStorage.setItem("BUSINESS_TOKEN",e)}},{key:"getToken",value:function(){return localStorage.getItem("BUSINESS_TOKEN")}},{key:"getPublicHeaders",value:function(){return{"Content-Type":"application/json"}}}]),e}();function q(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),s=i[0],m=i[1],f=Object(a.useState)(""),b=Object(l.a)(f,2),h=b[0],p=b[1],d=Object(a.useState)(""),v=Object(l.a)(d,2),E=v[0],g=v[1],O=Object(a.useState)(""),j=Object(l.a)(O,2),k=j[0],w=j[1],y=Object(a.useState)(""),C=Object(l.a)(y,2),N=C[0],T=C[1],L=Object(o.f)(),A=new $;return Object(a.useEffect)((function(){localStorage.clear()}),[]),r.a.createElement("div",null,r.a.createElement(x,null,"Register"),r.a.createElement(S,null,"Enter details to register"),r.a.createElement(P,null,r.a.createElement(z,null,r.a.createElement("li",null,r.a.createElement(B,{placeholder:"First Name",value:n,onChange:function(e){return c(e.target.value)}})),r.a.createElement("li",null,r.a.createElement(B,{placeholder:"Last Name",value:s,onChange:function(e){return m(e.target.value)}})),r.a.createElement("li",null,r.a.createElement(B,{placeholder:"Email",value:h,onChange:function(e){return p(e.target.value)}})),r.a.createElement("li",null,r.a.createElement(B,{type:"password",placeholder:"Password",value:E,onChange:function(e){return g(e.target.value)}})),r.a.createElement("li",null,r.a.createElement(B,{placeholder:"Organisation Name",value:k,onChange:function(e){return w(e.target.value)}})),r.a.createElement("li",null,r.a.createElement(B,{placeholder:"Organisation Type",value:N,onChange:function(e){return T(e.target.value)}}))),r.a.createElement(U,{onClick:function(){A.register(n,s,h,E,k,N),L.push("/msg/".concat(h))}},"Register")))}function G(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),s=i[0],m=i[1],f=Object(o.f)(),b=f.location.search,h=new URLSearchParams(b),p=Object(a.useState)(h.get("uid")),d=Object(l.a)(p,2),v=d[0],E=d[1],g=Object(a.useState)(h.get("token")),O=Object(l.a)(g,2),j=O[0],k=O[1],w=new $;return Object(a.useEffect)((function(){localStorage.clear()}),[]),r.a.createElement("div",null,j&&v?r.a.createElement("div",null,r.a.createElement(x,null,"Activate Account"),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(U,{onClick:function(){w.activateUser(v,j).then((function(){E(null),k(null),f.push("/login")}))}},"Activate"))):r.a.createElement("div",null,r.a.createElement(x,null,"Login"),r.a.createElement(P,null,r.a.createElement(A,null,r.a.createElement("li",null,r.a.createElement(B,{placeholder:"Email",value:n,onChange:function(e){return c(e.target.value)}})),r.a.createElement("li",null," ",r.a.createElement(B,{placeholder:"Password",type:"password",value:s,onChange:function(e){return m(e.target.value)}}))),r.a.createElement(U,{onClick:function(){w.login(n,s).then((function(e){return e.json()})).then((function(e){w.setToken(e.token),f.push("/home")}))}},"Login"))))}var Q=Object(a.createContext)({});function X(){var e=Object(a.useContext)(Q).customerList;return r.a.createElement(P,null,r.a.createElement(N,null,"Customer List"),e&&e.map((function(e){return r.a.createElement(A,{key:e.id},r.a.createElement("li",null,r.a.createElement(I,{to:"/customer/".concat(e.id)},r.a.createElement("b",null,e.name)," ",e.organisationNr,","," ",e.reference)))})))}var Y=new $,Z=function(){function e(){Object(V.a)(this,e)}return Object(_.a)(e,[{key:"addCustomer",value:function(){var e=Object(F.a)(D.a.mark((function e(t,n,a,r,c,u,l,o){var i,s;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat("https://frebi.willandskill.eu/","api/v1/customers/"),s={name:t,organisationNr:n,vatNr:a,reference:r,paymentTerm:parseInt(c),website:u,email:l,phoneNumber:o},e.abrupt("return",fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Y.getToken())},body:JSON.stringify(s)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r,c,u,l,o){return e.apply(this,arguments)}}()},{key:"getCustomer",value:function(){var e=Object(F.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.find((function(e){return e.id===n})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCustomerList",value:function(){var e=Object(F.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://frebi.willandskill.eu/","api/v1/customers/"),e.abrupt("return",fetch(t,{headers:{Authorization:"Bearer ".concat(Y.getToken())}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteCustomer",value:function(){var e=Object(F.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("https://frebi.willandskill.eu/","/api/v1/customers/").concat(t,"/"),e.abrupt("return",fetch(n,{method:"Delete",headers:{Authorization:"Bearer ".concat(Y.getToken())}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ee=Object(a.createContext)({});function te(){var e=Object(a.useContext)(ee),t=e.email,n=e.setEmail,c=Object(a.useContext)(ee),u=c.firstName,l=c.setFirstName,o=Object(a.useContext)(ee),i=o.lastName,s=o.setLastName,m=new $;return Object(a.useEffect)((function(){m.getUserInfo().then((function(e){return e.json()})).then((function(e){l(e.firstName),s(e.lastName),n(e.email)}))}),[]),r.a.createElement("div",null,r.a.createElement(S,null,"Logged in as:"),r.a.createElement(S,null,r.a.createElement("b",null,u," ",i)),r.a.createElement(S,null,r.a.createElement("b",null,t)))}function ne(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),o=Object(l.a)(u,2),i=o[0],s=o[1],m=Object(a.useState)(""),f=Object(l.a)(m,2),b=f[0],h=f[1],p=Object(a.useState)(""),d=Object(l.a)(p,2),v=d[0],E=d[1],g=Object(a.useState)(""),O=Object(l.a)(g,2),j=O[0],k=O[1],w=Object(a.useState)(""),y=Object(l.a)(w,2),C=y[0],S=y[1],T=Object(a.useState)(""),L=Object(l.a)(T,2),A=L[0],I=L[1],K=Object(a.useState)(""),H=Object(l.a)(K,2),J=H[0],R=H[1],W=Object(a.useContext)(Q).setCustomerList,D=new Z;function F(){D.getCustomerList().then((function(e){return e.json()})).then((function(e){W(e.results)}))}return Object(a.useEffect)((function(){F()}),[]),r.a.createElement("div",null,r.a.createElement(x,null,"Home Page"),r.a.createElement(te,null),r.a.createElement(X,null),r.a.createElement(P,null,r.a.createElement(N,null,"Add new Customer"),r.a.createElement(z,null,r.a.createElement("form",{id:"form"},r.a.createElement("li",null," ",r.a.createElement(B,{placeholder:"Customer Name",value:n,onChange:function(e){return c(e.target.value)}})),r.a.createElement("li",null,r.a.createElement(B,{placeholder:"Organisation Number",value:i,onChange:function(e){return s(e.target.value)}})),r.a.createElement("li",null," ",r.a.createElement(B,{placeholder:"Vat Number",value:b,onChange:function(e){return h(e.target.value)}})),r.a.createElement("li",null," ",r.a.createElement(B,{placeholder:"Reference",value:v,onChange:function(e){return E(e.target.value)}})),r.a.createElement("li",null," ",r.a.createElement(B,{placeholder:"Payment Term",value:j,onChange:function(e){return k(e.target.value)}})),r.a.createElement("li",null," ",r.a.createElement(B,{placeholder:"Website",value:C,onChange:function(e){return S(e.target.value)}})),r.a.createElement("li",null,r.a.createElement(B,{placeholder:"Email",value:A,onChange:function(e){return I(e.target.value)}})),r.a.createElement("li",null,r.a.createElement(B,{placeholder:"Phone Number",value:J,onChange:function(e){return R(e.target.value)}})))),r.a.createElement(U,{onClick:function(){D.addCustomer(n,i,b,v,j,C,A,J).then((function(){F(),c(""),s(""),h(""),E(""),k(""),S(""),I(""),R("")}))}},"Add customer")))}function ae(e){var t=parseInt(e.match.params.id),n=Object(a.useContext)(Q),c=n.customerList,u=n.setCustomerList,i=Object(a.useState)({}),s=Object(l.a)(i,2),m=s[0],f=s[1],b=Object(o.f)(),h=new Z;function p(){h.getCustomer(c,t).then((function(e){return f(e)}))}return Object(a.useEffect)((function(){p()}),[]),r.a.createElement("div",null,r.a.createElement(x,null,"Detailed Customer"),m?r.a.createElement(P,null,r.a.createElement(N,null,m.name),r.a.createElement(S,null,"Organisation Nr: ",r.a.createElement("b",null,m.organisationNr)),r.a.createElement(S,null,"Vat Nr: ",r.a.createElement("b",null,m.vatNr)),r.a.createElement(S,null,"Reference: ",r.a.createElement("b",null,m.reference)),r.a.createElement(S,null,"Payment Term: ",r.a.createElement("b",null,m.paymentTerm)),r.a.createElement(S,null,"Website: ",r.a.createElement("b",null,m.website)),r.a.createElement(S,null,"Email: ",r.a.createElement("b",null,m.email)),r.a.createElement(S,null,"Phone Nr: ",r.a.createElement("b",null,m.phoneNumber)),r.a.createElement(H,{onClick:function(){window.confirm("Sure you want to delete this customer?")&&function(e){h.deleteCustomer(e),b.push("/home"),h.getCustomerList().then((function(e){return e.json()})).then((function(e){u(e.results)}))}(m.id)}},"Delete")):(h.getCustomerList().then((function(e){return e.json()})).then((function(e){u(e.results)})),void p()))}function re(e){var t=e.match.params.email;return r.a.createElement("div",null,r.a.createElement(x,null,"Welcome"),r.a.createElement(S,null,"An email has been sent to ",r.a.createElement("b",null,t),"."),r.a.createElement(S,null,"Please click the link in email to activate your account."))}var ce=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)([]),i=Object(l.a)(u,2),s=i[0],m=i[1],f=Object(a.useState)([]),b=Object(l.a)(f,2),h=b[0],p=b[1],d=Object(a.useState)([]),v=Object(l.a)(d,2),E=v[0],g=v[1];return r.a.createElement(L,null,r.a.createElement(R,null),r.a.createElement(o.c,null,r.a.createElement(ee.Provider,{value:{firstName:s,setFirstName:m,lastName:h,setLastName:p,email:E,setEmail:g}},r.a.createElement(Q.Provider,{value:{customerList:n,setCustomerList:c}},r.a.createElement(o.a,{path:"/customer/:id",render:function(e){return r.a.createElement(ae,e)}}),r.a.createElement(o.a,{path:"/msg/:email",render:function(e){return r.a.createElement(re,e)}}),r.a.createElement(o.a,{path:"/home"},r.a.createElement(ne,null)),r.a.createElement(o.a,{path:"/login"},r.a.createElement(G,null)),r.a.createElement(o.a,{exact:!0,path:"/"},r.a.createElement(q,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,null,r.a.createElement(ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.49e95b43.chunk.js.map